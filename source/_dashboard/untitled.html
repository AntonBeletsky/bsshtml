<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
<!-- -----------------------CSS----------------------- -->
<!--  icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Boostrap icons  -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<!-- Fotorama Gallery -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css" rel="stylesheet">



<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Material UI icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Material Symbols Outlined -->
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=grid_view" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>boostrap-lux-shop-master</title>
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;500;600;700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed&amp;display=swap">
    <link rel="stylesheet" href="../../assets/css/articles-badges-images.css">
    <link rel="stylesheet" href="../../assets/css/basket.css">
    <link rel="stylesheet" href="../../assets/css/body.css">
    <link rel="stylesheet" href="../../assets/css/bootstrap-extension.css">
    <link rel="stylesheet" href="../../assets/css/catalog-page.css">
    <link rel="stylesheet" href="../../assets/css/checkout.css">
    <link rel="stylesheet" href="../../assets/css/compare-page.css">
    <link rel="stylesheet" href="../../assets/css/customer-account.css">
    <link rel="stylesheet" href="../../assets/css/dialog.css">
    <link rel="stylesheet" href="../../assets/css/featured-Itemn.css">
    <link rel="stylesheet" href="../../assets/css/fotorama.css">
    <link rel="stylesheet" href="../../assets/css/header-navbar-black.css">
    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" href="../../assets/css/home-page.css">
    <link rel="stylesheet" href="../../assets/css/img.css">
    <link rel="stylesheet" href="../../assets/css/index-page.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/order-item.css">
    <link rel="stylesheet" href="../../assets/css/popover-content.css">
    <link rel="stylesheet" href="../../assets/css/product-card-grid.css">
    <link rel="stylesheet" href="../../assets/css/product-card-list.css">
    <link rel="stylesheet" href="../../assets/css/product-page.css">
    <link rel="stylesheet" href="../../assets/css/products-carousel.css">
    <link rel="stylesheet" href="../../assets/css/scroll-normalizer-master.css">
    <link rel="stylesheet" href="../../assets/css/shadow-box.css">
    <link rel="stylesheet" href="../../assets/css/shopping-cart.css">
    <link rel="stylesheet" href="../../assets/css/slider-price.css">
    <link rel="stylesheet" href="../../assets/css/stars-rating.css">
    <link rel="stylesheet" href="../../assets/css/tech-shadow-box.css">
    <link rel="stylesheet" href="../../assets/css/timeline.css">
    <link rel="stylesheet" href="../../assets/css/ui-collapsible-panel.css">
    <link rel="stylesheet" href="../../assets/css/ui-icons-circle.css">
    <link rel="stylesheet" href="../../assets/css/wishlist.css">
</head>

<body><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic Component Engine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body { background: #f8f9fa; padding-bottom: 50px; }
        .doc-card { background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow: hidden; margin-bottom: 3rem; }
        .preview-box { padding: 2rem; border-bottom: 1px solid #eee; background: #fff; }
        .code-box { background: #2d2d2d; position: relative; }
        .code-box pre { margin: 0; padding: 1.2rem; max-height: 350px; }
        .copy-trigger { position: absolute; top: 10px; right: 10px; z-index: 5; opacity: 0.7; transition: 0.3s; }
        .copy-trigger:hover { opacity: 1; }
        .nav-tabs { border-bottom: none; background: #f1f1f1; padding: 0 10px; }
        .nav-link { border: none !important; color: #666; padding: 10px 20px; }
        .nav-link.active { background: #2d2d2d !important; color: #fff !important; }
    </style>
</head>
<body>

<div class="container py-5">
    <header class="mb-5">
        <h1 class="fw-bold">UI System Core</h1>
        <p class="text-muted">Generated dynamically from JSON registry</p>
    </header>

    <div id="docs-root"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

<script>
/**
 * КЛАСС ОБСЛУЖИВАНИЯ ДОКУМЕНТАЦИИ
 */
class DocManager {
    constructor(containerId, componentsData) {
        this.root = document.getElementById(containerId);
        this.data = componentsData;
        this.init();
    }

    init() {
        this.renderAll();
        this.setupCopyHandlers();
        this.executeScripts();
        this.injectStyles();
    }

    // Создание DOM структур
    renderAll() {
        this.root.innerHTML = this.data.map(comp => `
            <div class="doc-card" id="comp-${comp.id}">
                <div class="p-3 border-bottom">
                    <h4 class="m-0">${comp.name}</h4>
                    <p class="text-muted small m-0 mt-1">${comp.description}</p>
                </div>
                
                <div class="preview-box">
                    <div id="runtime-${comp.id}">${comp.html}</div>
                </div>

                <div class="code-box">
                    <button class="btn btn-sm btn-light copy-trigger" data-comp-id="${comp.id}">
                        <i class="bi bi-clipboard"></i> Copy
                    </button>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#html-${comp.id}">HTML</button></li>
                        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#css-${comp.id}">CSS</button></li>
                        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#js-${comp.id}">JS</button></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="html-${comp.id}">
                            <pre><code class="language-html">${this.escapeHTML(comp.html)}</code></pre>
                        </div>
                        <div class="tab-pane fade" id="css-${comp.id}">
                            <pre><code class="language-css">${comp.css || '/* No custom CSS */'}</code></pre>
                        </div>
                        <div class="tab-pane fade" id="js-${comp.id}">
                            <pre><code class="language-javascript">${comp.js || '// No custom JS'}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
        
        // Подсветка кода Prism
        Prism.highlightAll();
    }

    // Чистый метод для обработки кнопок копирования без onclick
    setupCopyHandlers() {
        this.root.addEventListener('click', (e) => {
            const btn = e.target.closest('.copy-trigger');
            if (!btn) return;

            const compId = btn.dataset.compId;
            const activePane = document.querySelector(`#comp-${compId} .tab-pane.active code`);
            const text = activePane.innerText;

            navigator.clipboard.writeText(text).then(() => {
                const originalLabel = btn.innerHTML;
                btn.innerHTML = '<i class="bi bi-check-lg"></i> Copied!';
                btn.classList.replace('btn-light', 'btn-success');
                setTimeout(() => {
                    btn.innerHTML = originalLabel;
                    btn.classList.replace('btn-success', 'btn-light');
                }, 1500);
            });
        });
    }

    // Внедрение CSS в head
    injectStyles() {
        const styleSheet = document.createElement("style");
        styleSheet.textContent = this.data.map(c => c.css).join("\n");
        document.head.appendChild(styleSheet);
    }

    // Безопасное исполнение JS из массива
    executeScripts() {
        this.data.forEach(comp => {
            if (comp.js && comp.js.trim() !== "") {
                try {
                    // Используем new Function для изоляции и передачи контекста если нужно
                    const run = new Function(comp.js);
                    run();
                } catch (err) {
                    console.error(`Error executing JS for ${comp.name}:`, err);
                }
            }
        });
    }

    escapeHTML(str) {
        return str.replace(/[&<>"']/g, m => ({
            '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
        })[m]);
    }
}

/**
 * ВАШ МАССИВ ДАННЫХ (JSON)
 * Можно загружать через fetch('data.json')
 */
const componentsConfig = [
    {
        id: "alert-dynamic",
        name: "Auto-dismiss Alert",
        description: "A notification that appears and vanishes after 3 seconds.",
        html: `<div id="alert-container"></div>
               <button id="trigger-alert" class="btn btn-warning">Trigger Magic</button>`,
        css: `.alert-custom { border-left: 5px solid #ffc107; transition: 0.5s; }`,
        js: `
            document.getElementById('trigger-alert').addEventListener('click', () => {
                const container = document.getElementById('alert-container');
                const el = document.createElement('div');
                el.className = 'alert alert-warning alert-custom mt-2';
                el.innerText = 'This will self-destruct in 3 seconds';
                container.appendChild(el);
                setTimeout(() => el.remove(), 3000);
            });
        `
    },
    {
        id: "gradient-card",
        name: "Glassmorphism Card",
        description: "Modern UI card using CSS backdrop-filter.",
        html: `<div class="glass-card">
                 <h5>Premium Plan</h5>
                 <p>Unlock all features</p>
                 <button class="btn btn-sm btn-light">Upgrade</button>
               </div>`,
        css: `
            .glass-card {
                background: linear-gradient(135deg, #6e8efb, #a777e3);
                padding: 30px;
                border-radius: 15px;
                color: white;
                max-width: 250px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            }
        `,
        js: ""
    }
];

// ЗАПУСК
document.addEventListener('DOMContentLoaded', () => {
    new DocManager('docs-root', componentsConfig);
});
</script>

</body>
</html>
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../assets/js/bs-init.js"></script>
    <script src="../../assets/js/add-theme-changer-button.js"></script>
    <script src="../../assets/js/catalog-page.js"></script>
    <script src="../../assets/js/checkout.js"></script>
    <script src="../../assets/js/home-page-carusel.js"></script>
    <script src="../../assets/js/import/fotorama.js"></script>
    <script src="../../assets/js/main-header.js"></script>
    <script src="../../assets/js/product-page-sticky-nav-version.js"></script>
    <script src="../../assets/js/products-carousel.js"></script>
    <script src="../../assets/js/shopping-cart.js"></script>
    <script src="../../assets/js/slider-price.js"></script>
    <script src="../../assets/js/theme-changer-navbar.js"></script>
</body>

</html>