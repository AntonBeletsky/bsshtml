<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
<!-- -----------------------CSS----------------------- -->
<!--  icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Boostrap icons  -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<!-- Fotorama Gallery -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css" rel="stylesheet">



<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Material UI icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Material Symbols Outlined -->
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=grid_view" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>boostrap-lux-shop-master</title>
    <link rel="stylesheet" href="../../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;500;600;700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed&amp;display=swap">
    <link rel="stylesheet" href="../../../assets/css/articles-badges-images.css">
    <link rel="stylesheet" href="../../../assets/css/basket.css">
    <link rel="stylesheet" href="../../../assets/css/body.css">
    <link rel="stylesheet" href="../../../assets/css/bootstrap-extension.css">
    <link rel="stylesheet" href="../../../assets/css/catalog-page.css">
    <link rel="stylesheet" href="../../../assets/css/checkout.css">
    <link rel="stylesheet" href="../../../assets/css/compare-page.css">
    <link rel="stylesheet" href="../../../assets/css/customer-account.css">
    <link rel="stylesheet" href="../../../assets/css/dialog.css">
    <link rel="stylesheet" href="../../../assets/css/featured-Itemn.css">
    <link rel="stylesheet" href="../../../assets/css/fotorama.css">
    <link rel="stylesheet" href="../../../assets/css/header-navbar-black.css">
    <link rel="stylesheet" href="../../../assets/css/header.css">
    <link rel="stylesheet" href="../../../assets/css/home-page.css">
    <link rel="stylesheet" href="../../../assets/css/img.css">
    <link rel="stylesheet" href="../../../assets/css/index-page.css">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <link rel="stylesheet" href="../../../assets/css/order-item.css">
    <link rel="stylesheet" href="../../../assets/css/popover-content.css">
    <link rel="stylesheet" href="../../../assets/css/product-card-grid.css">
    <link rel="stylesheet" href="../../../assets/css/product-card-list.css">
    <link rel="stylesheet" href="../../../assets/css/product-page.css">
    <link rel="stylesheet" href="../../../assets/css/products-carousel.css">
    <link rel="stylesheet" href="../../../assets/css/scroll-normalizer-master.css">
    <link rel="stylesheet" href="../../../assets/css/shadow-box.css">
    <link rel="stylesheet" href="../../../assets/css/shopping-cart.css">
    <link rel="stylesheet" href="../../../assets/css/slider-price.css">
    <link rel="stylesheet" href="../../../assets/css/stars-rating.css">
    <link rel="stylesheet" href="../../../assets/css/tech-shadow-box.css">
    <link rel="stylesheet" href="../../../assets/css/timeline.css">
    <link rel="stylesheet" href="../../../assets/css/ui-collapsible-panel.css">
    <link rel="stylesheet" href="../../../assets/css/ui-icons-circle.css">
    <link rel="stylesheet" href="../../../assets/css/wishlist.css">
</head>

<body><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page with Gallery</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* --- STYLES (CSS) --- */
        body { background-color: #f4f6f8; font-family: system-ui, -apple-system, sans-serif; }
        .product-card { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }

        :root {
            --mg-accent: #3b82f6; /* Accent blue color */
            --mg-bg: #ffffff;
            --mg-nav-size: 80px; /* Thumbnail size */
            --mg-gap: 12px;
        }

        /* Main container */
        .marketplace-gallery {
            display: grid;
            gap: var(--mg-gap);
            position: relative;
            user-select: none;
            opacity: 0; /* Hidden until JS loads */
            transition: opacity 0.5s ease;
            width: 100%;
        }

        /* Class to make gallery visible after initialization */
        .marketplace-gallery.mg-ready { opacity: 1; }

        /* Thumbnail position LEFT (Desktop) */
        @media (min-width: 768px) {
            .marketplace-gallery[data-thumb-position="left"] {
                grid-template-columns: var(--mg-nav-size) 1fr;
                grid-template-rows: 1fr;
            }
            .marketplace-gallery[data-thumb-position="left"] .mg-stage { order: 2; }
            .marketplace-gallery[data-thumb-position="left"] .mg-nav   { order: 1; flex-direction: column; }
        }

        /* Thumbnail position BOTTOM (Mobile or default) */
        .marketplace-gallery[data-thumb-position="bottom"] {
            grid-template-columns: 1fr;
            grid-template-rows: 1fr auto;
        }

        /* Main viewport (Stage) */
        .mg-stage {
            position: relative;
            background: var(--mg-bg);
            overflow: hidden;
            border-radius: 4px;
            /* Aspect ratio placeholder */
            aspect-ratio: var(--mg-ratio, 1/1);
            cursor: crosshair; /* Crosshair cursor for zoom */
            border: 1px solid #eee;
        }

        .mg-track {
            display: flex;
            height: 100%;
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
            will-change: transform;
        }

        .mg-slide {
            flex: 0 0 100%;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .mg-slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
            transform-origin: center center;
            transition: transform 0.1s ease-out; /* Smooth zoom transition */
            pointer-events: none;
        }

        /* Zoom state */
        .mg-slide.is-zoomed img {
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        /* Video container */
        .mg-video-wrapper { width: 100%; height: 100%; background: #000; position: relative; display: flex; align-items: center; justify-content: center; }
        .mg-play-btn {
            position: absolute;
            width: 60px; height: 60px;
            background: rgba(0,0,0,0.6);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 10;
            transition: transform 0.2s;
        }
        .mg-play-btn:hover { transform: scale(1.1); background: var(--mg-accent); }
        .mg-play-btn::before {
            content: ''; border-style: solid; border-width: 10px 0 10px 20px;
            border-color: transparent transparent transparent #fff; margin-left: 4px;
        }

        /* Navigation (Thumbnails) */
        .mg-nav { display: flex; gap: 10px; overflow: auto; scrollbar-width: none; }
        .mg-nav::-webkit-scrollbar { display: none; }

        .mg-thumb {
            width: var(--mg-nav-size); height: var(--mg-nav-size);
            flex-shrink: 0;
            border: 1px solid #ddd; border-radius: 4px;
            cursor: pointer; overflow: hidden;
            opacity: 0.6; transition: all 0.2s;
        }
        .mg-thumb.active { border-color: var(--mg-accent); box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); opacity: 1; }
        .mg-thumb img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Video indicator on thumbnail */
        .mg-thumb.is-video { position: relative; }
        .mg-thumb.is-video::after {
            content: "▶"; position: absolute; bottom: 0; right: 0;
            background: rgba(0,0,0,0.6); color: #fff; font-size: 10px;
            padding: 2px 4px; border-top-left-radius: 4px;
        }

        /* Arrows */
        .mg-arrow {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 40px; height: 40px;
            background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-radius: 50%; cursor: pointer; z-index: 20;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.2s;
        }
        .mg-stage:hover .mg-arrow { opacity: 1; }
        .mg-arrow--prev { left: 10px; }
        .mg-arrow--next { right: 10px; }
        .mg-arrow.disabled { display: none; }
    </style>
</head>
<body>

<div class="container py-5">
    <div class="product-card">
        <div class="row">
            
            <div class="col-md-7 col-lg-6">
                <div class="marketplace-gallery" 
                     data-ratio="1/1" 
                     data-thumb-position="left">

                    <img src="https://picsum.photos/id/1/600/600" 
                         data-full="https://picsum.photos/id/1/1600/1600" 
                         alt="Laptop Front View">

                    <div data-video="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1"
                         data-thumb="https://picsum.photos/id/180/600/600">
                    </div>

                    <img src="https://picsum.photos/id/119/600/600" 
                         data-full="https://picsum.photos/id/119/1600/1600" 
                         alt="Laptop Side View">
                         
                    <img src="https://picsum.photos/id/20/600/600" 
                         data-full="https://picsum.photos/id/20/1600/1600" 
                         alt="Accessories">
                </div>
            </div>

            <div class="col-md-5 col-lg-6 ps-lg-5">
                <h6 class="text-uppercase text-muted fw-bold mb-2">Electronics</h6>
                <h1 class="display-6 fw-bold text-dark">MacBook Pro M3 Max</h1>
                <div class="mb-3">
                    <span class="text-warning">★★★★★</span> 
                    <span class="text-muted">(128 Reviews)</span>
                </div>
                <h2 class="mb-4">$2,499.00</h2>
                
                <p class="text-muted mb-4">
                    The ultimate laptop for professionals. Hover over the image on the left to activate <b>Zoom Mode</b> and inspect the fine details, or watch the video demonstration.
                </p>

                <div class="d-grid gap-2">
                    <button class="btn btn-primary btn-lg">Add to Cart</button>
                    <button class="btn btn-outline-secondary">Add to Wishlist</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    class MarketplaceGallery {
        constructor(element, options = {}) {
            // Helper: safe element selection
            this.el = typeof element === 'string' ? document.querySelector(element) : element;
            if (!this.el) {
                console.error('Gallery element not found');
                return;
            }

            this.config = {
                ratio: this.el.dataset.ratio || '1/1',
                thumbPosition: this.el.dataset.thumbPosition || 'bottom',
                zoomScale: 2.0, // Zoom magnification level
                ...options
            };

            this.state = {
                index: 0,
                items: []
            };

            this._init();
        }

        _init() {
            this._parseItems();
            this._buildStructure();
            this._bindEvents();
            
            // Initialize first slide
            this.goTo(0, false);
            
            // Make gallery visible (remove opacity: 0)
            requestAnimationFrame(() => this.el.classList.add('mg-ready'));
        }

        _parseItems() {
            const children = Array.from(this.el.children);
            this.state.items = children.map(child => {
                const isVideo = child.hasAttribute('data-video');
                // Use placeholder if src is missing
                const src = child.getAttribute('src') || child.getAttribute('href') || '';
                
                return {
                    type: isVideo ? 'video' : 'image',
                    src: src,
                    full: child.dataset.full || src, 
                    videoSrc: child.dataset.video, 
                    thumb: child.dataset.thumb || src,
                    alt: child.getAttribute('alt') || 'Product image'
                };
            });
            // Clear HTML to build custom structure
            this.el.innerHTML = '';
        }

        _buildStructure() {
            if (!this.el.classList.contains('marketplace-gallery')) {
                this.el.classList.add('marketplace-gallery');
            }
            this.el.setAttribute('data-thumb-position', this.config.thumbPosition);
            
            // 1. Stage (Main Image)
            this.stage = document.createElement('div');
            this.stage.className = 'mg-stage';
            this.stage.style.setProperty('--mg-ratio', this.config.ratio.replace('/', ' / '));

            // 2. Slide Track
            this.track = document.createElement('div');
            this.track.className = 'mg-track';

            this.state.items.forEach((item, i) => {
                const slide = document.createElement('div');
                slide.className = 'mg-slide';
                
                if (item.type === 'image') {
                    const img = document.createElement('img');
                    img.src = item.src;
                    img.dataset.full = item.full;
                    img.alt = item.alt;
                    slide.appendChild(img);
                } else {
                    // Video Slide
                    const wrapper = document.createElement('div');
                    wrapper.className = 'mg-video-wrapper';
                    wrapper.style.background = `url(${item.thumb}) center/cover no-repeat`;
                    
                    const playBtn = document.createElement('div');
                    playBtn.className = 'mg-play-btn';
                    playBtn.addEventListener('click', () => this._loadVideo(wrapper, item.videoSrc));
                    
                    wrapper.appendChild(playBtn);
                    slide.appendChild(wrapper);
                }
                this.track.appendChild(slide);
            });

            this.stage.appendChild(this.track);
            
            // Navigation Arrows
            this.prevBtn = this._createArrow('prev');
            this.nextBtn = this._createArrow('next');
            this.stage.appendChild(this.prevBtn);
            this.stage.appendChild(this.nextBtn);

            // 3. Navigation (Thumbnails)
            this.nav = document.createElement('div');
            this.nav.className = 'mg-nav';
            
            this.state.items.forEach((item, i) => {
                const thumb = document.createElement('div');
                thumb.className = `mg-thumb ${item.type === 'video' ? 'is-video' : ''}`;
                
                const img = document.createElement('img');
                img.src = item.thumb;
                
                thumb.appendChild(img);
                thumb.addEventListener('click', () => this.goTo(i));
                this.nav.appendChild(thumb);
            });

            this.el.appendChild(this.stage);
            this.el.appendChild(this.nav);
        }

        _createArrow(dir) {
            const btn = document.createElement('div');
            btn.className = `mg-arrow mg-arrow--${dir}`;
            btn.innerHTML = dir === 'prev' ? '&#10094;' : '&#10095;';
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                dir === 'prev' ? this.prev() : this.next();
            });
            return btn;
        }

        goTo(index, animate = true) {
            if (index < 0) index = 0;
            if (index >= this.state.items.length) index = this.state.items.length - 1;

            this.state.index = index;
            
            // Move track
            const percentage = index * -100;
            this.track.style.transition = animate ? '' : 'none';
            this.track.style.transform = `translateX(${percentage}%)`;

            // Update active state for thumbnails
            Array.from(this.nav.children).forEach((t, i) => {
                t.classList.toggle('active', i === index);
                if (i === index) {
                    t.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
            });

            // Update arrow visibility
            this.prevBtn.classList.toggle('disabled', index === 0);
            this.nextBtn.classList.toggle('disabled', index === this.state.items.length - 1);
        }

        next() { this.goTo(this.state.index + 1); }
        prev() { this.goTo(this.state.index - 1); }

        _loadVideo(wrapper, url) {
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.frameBorder = "0";
            iframe.allow = "autoplay; fullscreen";
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            wrapper.innerHTML = '';
            wrapper.appendChild(iframe);
        }

        _bindEvents() {
            // Zoom events
            this.stage.addEventListener('mousemove', (e) => this._handleZoom(e));
            this.stage.addEventListener('mouseleave', () => this._resetZoom());
        }

        /* Zoom Logic (Magnifier Effect) */
        _handleZoom(e) {
            const currentItem = this.state.items[this.state.index];
            if (currentItem.type !== 'image') return;

            const slide = this.track.children[this.state.index];
            const img = slide.querySelector('img');
            const rect = this.stage.getBoundingClientRect();

            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Calculate cursor position percentages
            const xPercent = (x / rect.width) * 100;
            const yPercent = (y / rect.height) * 100;

            slide.classList.add('is-zoomed');
            
            // Lazy-load high-res image on hover
            if (img.src !== img.dataset.full) {
                img.src = img.dataset.full;
            }

            img.style.transformOrigin = `${xPercent}% ${yPercent}%`;
            img.style.transform = `scale(${this.config.zoomScale})`;
        }

        _resetZoom() {
            const slide = this.track.children[this.state.index];
            if (!slide) return;
            const img = slide.querySelector('img');
            
            if (img) {
                slide.classList.remove('is-zoomed');
                img.style.transform = 'scale(1)';
            }
        }
    }

    // Auto-init on page load
    document.addEventListener('DOMContentLoaded', () => {
        const galleries = document.querySelectorAll('.marketplace-gallery');
        galleries.forEach(el => new MarketplaceGallery(el));
    });
</script>

</body>
</html>
    <script src="../../../assets/js/jquery.min.js"></script>
    <script src="../../../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../../assets/js/bs-init.js"></script>
    <script src="../../../assets/js/add-theme-changer-button.js"></script>
    <script src="../../../assets/js/catalog-page.js"></script>
    <script src="../../../assets/js/checkout.js"></script>
    <script src="../../../assets/js/home-page-carusel.js"></script>
    <script src="../../../assets/js/import/fotorama.js"></script>
    <script src="../../../assets/js/main-header.js"></script>
    <script src="../../../assets/js/product-page-sticky-nav-version.js"></script>
    <script src="../../../assets/js/products-carousel.js"></script>
    <script src="../../../assets/js/shopping-cart.js"></script>
    <script src="../../../assets/js/slider-price.js"></script>
    <script src="../../../assets/js/theme-changer-navbar.js"></script>
</body>

</html>