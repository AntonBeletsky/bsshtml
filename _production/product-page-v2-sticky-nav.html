<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
<!-- -----------------------CSS----------------------- -->
<!--  icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Boostrap icons  -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<!-- Fotorama Gallery -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css" rel="stylesheet">



<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Material UI icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Material Symbols Outlined -->
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=grid_view" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>boostrap-lux-shop-master</title>
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;500;600;700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed&amp;display=swap">
    <link rel="stylesheet" href="../assets/css/articles-badges-images.css">
    <link rel="stylesheet" href="../assets/css/basket.css">
    <link rel="stylesheet" href="../assets/css/body.css">
    <link rel="stylesheet" href="../assets/css/bootstrap-extension.css">
    <link rel="stylesheet" href="../assets/css/catalog-page.css">
    <link rel="stylesheet" href="../assets/css/checkout.css">
    <link rel="stylesheet" href="../assets/css/compare-page.css">
    <link rel="stylesheet" href="../assets/css/customer-account.css">
    <link rel="stylesheet" href="../assets/css/dialog.css">
    <link rel="stylesheet" href="../assets/css/featured-Itemn.css">
    <link rel="stylesheet" href="../assets/css/fotorama.css">
    <link rel="stylesheet" href="../assets/css/header-navbar-black.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/home-page.css">
    <link rel="stylesheet" href="../assets/css/img.css">
    <link rel="stylesheet" href="../assets/css/index-page.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/order-item.css">
    <link rel="stylesheet" href="../assets/css/popover-content.css">
    <link rel="stylesheet" href="../assets/css/product-card-grid.css">
    <link rel="stylesheet" href="../assets/css/product-card-list.css">
    <link rel="stylesheet" href="../assets/css/product-page-custumer-reviews-tab.css">
    <link rel="stylesheet" href="../assets/css/product-page.css">
    <link rel="stylesheet" href="../assets/css/products-carousel.css">
    <link rel="stylesheet" href="../assets/css/scroll-normalizer-master.css">
    <link rel="stylesheet" href="../assets/css/shadow-box.css">
    <link rel="stylesheet" href="../assets/css/shopping-cart.css">
    <link rel="stylesheet" href="../assets/css/slider-price.css">
    <link rel="stylesheet" href="../assets/css/stars-rating.css">
    <link rel="stylesheet" href="../assets/css/tech-shadow-box.css">
    <link rel="stylesheet" href="../assets/css/timeline.css">
    <link rel="stylesheet" href="../assets/css/ui-collapsible-panel.css">
    <link rel="stylesheet" href="../assets/css/ui-icons-circle.css">
    <link rel="stylesheet" href="../assets/css/wishlist.css">
</head>

<body><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page with Smart Navigation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* All CSS remains the same */
        body {
            position: relative; 
            background-color: #f8f9fa;
        }
        .product-header, .product-content-section {
            background-color: #fff;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .product-nav-sticky {
            position: fixed;
            top: var(--navbar-height);
            left: 0;
            width: 100%;
            z-index: 1020;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: fadeInDown 0.3s ease-in-out;
        }
        #productNavWrapper {
            background-color: #ffffff;
            border-bottom: 1px solid #dee2e6;
            border-top: 1px solid #dee2e6;
        }
        #productNav.nav-pills {
            flex-wrap: nowrap; 
            overflow-x: auto;
            overflow-y: hidden; 
            -webkit-overflow-scrolling: touch;
        }
        #productNav.nav-pills::-webkit-scrollbar { height: 4px; }
        #productNav.nav-pills::-webkit-scrollbar-thumb { background-color: #ccc; border-radius: 4px; }
        #productNav.nav-pills .nav-link {
            border-radius: 0;
            color: #333;
            font-weight: 500;
            padding: 1rem 1.5rem;
            white-space: nowrap; 
        }
        #productNav.nav-pills .nav-link.active {
            background-color: transparent;
            color: #0d6efd;
            border-bottom: 3px solid #0d6efd;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body data-bs-spy="scroll" data-bs-target="#productNavWrapper">

    <nav id="mainNavbar" class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">Store</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Catalog</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main id="mainContent" class="container mt-4">
        <div class="product-header">
            <div class="row g-4">
                <div class="col-md-6"><img src="https://via.placeholder.com/600x600/dee2e6/868e96.png?text=Product+Photo" class="img-fluid rounded" alt="Product Photo"></div>
                <div class="col-md-6">
                    <h1 class="display-5">Apple iPad Air 13" Tablet (2025)</h1>
                    <p class="text-muted">128GB Wi-Fi + Cellular, Blue</p>
                    <p class="lead fs-2 fw-bold text-primary">$999.00</p>
                    <button class="btn btn-primary btn-lg w-100"><i class="bi bi-cart-plus-fill me-2"></i>Add to Cart</button>
                </div>
            </div>
        </div>

        <div id="productNavWrapper">
            <div class="container">
                 <nav class="nav nav-pills" id="productNav">
                    <a class="nav-link" href="#details">Product Details</a>
                    <a class="nav-link" href="#specs">Specifications</a>
                    <a class="nav-link" href="#reviews">Reviews (25)</a>
                    <a class="nav-link" href="#accessories">Accessories</a>
                    <a class="nav-link" href="#qa">Q&A</a>
                    <a class="nav-link" href="#shipping">Shipping & Payment</a>
                 </nav>
            </div>
        </div>
        
        <div class="product-content-section" id="details"><h2>Product Details</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
        <div class="product-content-section" id="specs"><h2>Specifications</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
        <div class="product-content-section" id="reviews"><h2>Reviews</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
        <div class="product-content-section" id="accessories"><h2>Accessories</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
        <div class="product-content-section" id="qa"><h2>Q&A</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
        <div class="product-content-section" id="shipping"><h2>Shipping & Payment</h2><p>Lorem ipsum dolor sit amet... (long text content)</p></div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainNavbar = document.getElementById('mainNavbar');
            const productNavWrapper = document.getElementById('productNavWrapper');
            const productNav = document.getElementById('productNav'); // Get the nav itself
            const mainContent = document.getElementById('mainContent');

            if (!mainNavbar || !productNavWrapper || !mainContent || !productNav) {
                console.error("Initialization failed: a required element was not found.");
                return;
            }

            // --- Sticky Nav Logic ---
            const productNavOffsetTop = productNavWrapper.offsetTop;
            // This logic is simplified for clarity, the previous placeholder method also works
            function handleStickyNav() {
                if (window.scrollY >= (productNavOffsetTop - mainNavbar.offsetHeight)) {
                    productNavWrapper.classList.add('product-nav-sticky');
                    mainContent.style.paddingTop = `${productNavWrapper.offsetHeight}px`;
                } else {
                    productNavWrapper.classList.remove('product-nav-sticky');
                    mainContent.style.paddingTop = '0';
                }
            }
            window.addEventListener('scroll', handleStickyNav);

            // --- ScrollSpy & Dynamic Offset Logic ---
            const scrollSpy = new bootstrap.ScrollSpy(document.body);
            const updateLayoutValues = () => {
                const mainNavbarHeight = mainNavbar.offsetHeight;
                const productNavHeight = productNavWrapper.offsetHeight;
                document.documentElement.style.setProperty('--navbar-height', `${mainNavbarHeight}px`);
                const scrollSpyOffset = mainNavbarHeight + productNavHeight + 5;
                document.body.setAttribute('data-bs-offset', scrollSpyOffset.toString());
                scrollSpy.refresh();
            };
            const resizeObserver = new ResizeObserver(updateLayoutValues);
            resizeObserver.observe(mainNavbar);
            updateLayoutValues();

            // --- NEW: Auto-scroll the active nav item into view ---
            // Listen for the 'activate' event from Bootstrap's ScrollSpy
            window.addEventListener('activate.bs.scrollspy', (event) => {
                // The newly activated element's link (<a>) is in event.relatedTarget
                const activeNavItem = event.relatedTarget;

                if (activeNavItem) {
                    // Smoothly scroll the navigation bar to bring the active item into view
                    activeNavItem.scrollIntoView({
                        behavior: 'smooth',
                        inline: 'center',
                        block: 'nearest'
                    });
                }
            });
        });
    </script>
</body>
</html>
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/bs-init.js"></script>
    <script src="../assets/js/add-theme-changer-button.js"></script>
    <script src="../assets/js/catalog-page.js"></script>
    <script src="../assets/js/checkout.js"></script>
    <script src="../assets/js/home-page-carusel.js"></script>
    <script src="../assets/js/import/fotorama.js"></script>
    <script src="../assets/js/main-header.js"></script>
    <script src="../assets/js/product-page-sticky-nav-version.js"></script>
    <script src="../assets/js/products-carousel.js"></script>
    <script src="../assets/js/shopping-cart.js"></script>
    <script src="../assets/js/slider-price.js"></script>
    <script src="../assets/js/theme-changer-navbar.js"></script>
</body>

</html>